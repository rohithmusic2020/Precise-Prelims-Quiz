<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UPSC Prelims Quiz - January 2025</title>
<style>
  body { font-family: Arial, sans-serif; background-color: #f9fafb; color: #111827; margin: 0; padding: 0; }
  .container { max-width: 900px; margin: 30px auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
  h1 { text-align: center; color: #1f2937; }
  .question { margin-bottom: 20px; }
  .question h3 { margin-bottom: 8px; }
  button { background-color: #2563eb; color: white; border: none; padding: 10px 18px; border-radius: 8px; cursor: pointer; }
  button:hover { background-color: #1e40af; }
  .result { text-align: center; font-weight: bold; margin-top: 20px; }
  .timer { text-align: right; font-weight: bold; color: #b91c1c; margin-bottom: 20px; }
  #start-screen { text-align: center; }
  input { padding: 8px; border: 1px solid #ccc; border-radius: 6px; margin: 5px; width: 60%; }
  label { cursor: pointer; }
</style>
</head>
<body>
<div class="container">
  <h1>UPSC Prelims Quiz - January 2025</h1>

  <!-- Start Screen -->
  <div id="start-screen">
    <h2>Enter Your Details</h2>
    <input type="text" id="name" placeholder="Enter your full name" required><br>
    <input type="email" id="email" placeholder="Enter your email" required><br>
    <button onclick="startQuiz()">Start Quiz</button>
  </div>

  <!-- Quiz Section -->
  <div id="quiz-section" style="display:none;">
    <div class="timer">Time Left: <span id="timer">60:00</span></div>
    <div id="quiz"></div>
    <button onclick="submitQuiz()">Submit Quiz</button>
    <div class="result" id="result"></div>
  </div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzbgHewqZxIH0_M-uy4zU6WrnwPI4u8wuDscBgn4QH7KstnYOtIYh3WgKfyG0rgMpI0zQ/exec"; // Replace this with your Google Apps Script URL if different
let candidateName = "";
let candidateEmail = "";
let timeLeft = 60 * 60; // 1 hour
let timerInterval;

function startQuiz() {
  candidateName = document.getElementById('name').value.trim();
  candidateEmail = document.getElementById('email').value.trim();
  if (!candidateName || !candidateEmail) {
    alert('Please enter your name and email to start the quiz.');
    return;
  }
  document.getElementById('start-screen').style.display = 'none';
  document.getElementById('quiz-section').style.display = 'block';
  startTimer();
}

function startTimer() {
  const timerElement = document.getElementById('timer');
  timerInterval = setInterval(() => {
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;
    timerElement.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
    timeLeft--;
    if (timeLeft < 0) { clearInterval(timerInterval); submitQuiz(); alert('Time up! Quiz auto-submitted.'); }
  }, 1000);
}

// Full questions array (50 questions) - each object has: q, options (array), answer (0-based index)
const questions = [
  { q: "Which of the following is not part of NITI Aayog's twin mandate?", options: ["Promoting cooperative federalism", "Monitoring SDGs", "Formulating Five-Year Plans", "Designing welfare policies"], answer: 2 },
  { q: "The Vice-Chairperson of NITI Aayog is:", options: ["Appointed by the President", "Elected by Governing Council", "Appointed by the Prime Minister", "Nominated by the Finance Minister"], answer: 2 },
  { q: "Under Article 224A, ad-hoc judges are appointed with consent of:", options: ["Prime Minister", "Supreme Court", "President", "Parliament"], answer: 2 },
  { q: "Lokpal of India was established under which Act?", options: ["Prevention of Corruption Act", "Lokpal and Lokayuktas Act, 2013", "CVC Act", "Whistleblower Protection Act"], answer: 1 },
  { q: "Uttarakhand UCC excludes which group?", options: ["Hindus", "Scheduled Tribes", "Christians", "Muslims"], answer: 1 },
  { q: "Form 17C under Election Rules records:", options: ["Voter turnout", "Booth-wise vote details", "Candidate affidavits", "Election expenditure"], answer: 1 },
  { q: "Digital Personal Data Protection Act mandates parental consent below:", options: ["14 years", "16 years", "17 years", "18 years"], answer: 3 },
  { q: "Lokpal Chairperson can be:", options: ["Retired Governor", "Former CJI or SC Judge", "Serving MP", "CEC"], answer: 1 },
  { q: "Producer Price Index differs from WPI because it:", options: ["Includes taxes", "Excludes logistics & margins", "Measures retail inflation", "Covers services only"], answer: 1 },
  { q: "Interest Equalisation Scheme benefits:", options: ["Startups", "Importers", "MSME exporters", "Farmers"], answer: 2 },
  { q: "Fiscal Health Index launched by:", options: ["RBI", "Finance Ministry", "NITI Aayog", "CAG"], answer: 2 },
  { q: "National Critical Mineral Mission covers:", options: ["Coal & Iron", "Full mineral value chain", "Private mining only", "Crude oil imports"], answer: 1 },
  { q: "Ethanol blending target E20 year:", options: ["2024-25", "2025-26", "2026-27", "2030-31"], answer: 1 },
  { q: "Digital Payments Index base year:", options: ["2011-12", "2015-16", "2017-18", "2018-19"], answer: 2 },
  { q: "India ranked 2nd in future-of-work preparedness in:", options: ["IMD Index", "QS World Future Skills Index 2025", "ILO Report", "Global Skills Matrix"], answer: 1 },
  { q: "INTERPOL Silver Notice relates to:", options: ["Missing persons", "Criminal assets info", "Drug trafficking alert", "Terror alerts"], answer: 1 },
  { q: "Quad originated after:", options: ["2004 Tsunami", "2008 crisis", "2011 quake", "COVID-19 pandemic"], answer: 0 },
  { q: "Panama Canal connects:", options: ["Red Sea-Med", "Atlantic-Pacific", "Caspian-Black", "Arctic-Atlantic"], answer: 1 },
  { q: "Greenland belongs to:", options: ["Norway", "Denmark", "Iceland", "Canada"], answer: 1 },
  { q: "BRICS Partner Country category created under:", options: ["India 2021", "China 2022", "Russia 2024", "Brazil 2025"], answer: 2 },
  { q: "WTO created by Marrakesh Agreement in:", options: ["1989", "1991", "1994", "1995"], answer: 2 },
  { q: "Maha Kumbh occurs every:", options: ["6 years", "12 years", "36 years", "144 years"], answer: 3 },
  { q: "Gangasagar Mela occurs at:", options: ["Ganga-Yamuna", "Hooghly-Bay of Bengal", "Krishna-Godavari", "Ganga-Chambal"], answer: 1 },
  { q: "World Monuments Fund HQ is in:", options: ["London", "Rome", "New York", "Paris"], answer: 2 },
  { q: "Hatti tribe belongs to:", options: ["Odisha", "Himachal Pradesh", "Nagaland", "Jharkhand"], answer: 1 },
  { q: "Indus script remains undeciphered because:", options: ["Too few short inscriptions", "It has bilingual text", "It uses grammar", "It is numeric"], answer: 0 },
  { q: "Iron Age in Tamil Nadu dates to:", options: ["1500 BCE", "2000 BCE", "3345 BCE", "1300 BCE"], answer: 2 },
  { q: "Mallakhamb originated in:", options: ["Kerala", "Karnataka", "Maharashtra", "MP"], answer: 2 },
  { q: "Slack Tide occurs when:", options: ["At high tide", "Tidal pause before reversal", "During neap tide", "Full moon"], answer: 1 },
  { q: "Deccan Volcanism occurred about:", options: ["6m yrs", "66m yrs", "260m yrs", "600m yrs"], answer: 1 },
  { q: "IMD functions under Ministry of:", options: ["Science", "Earth Sciences", "Home", "Environment"], answer: 1 },
  { q: "Indiaâ€™s coastline now measures:", options: ["7516 km", "9800 km", "11098 km", "12600 km"], answer: 2 },
  { q: "Artesian condition occurs when:", options: ["Water table at sea", "Groundwater under pressure", "Perched aquifer", "Desert runoff"], answer: 1 },
  { q: "Planet Parade is:", options: ["Asteroid alignment", "Grouping of planets", "Lunar eclipse", "Solar flare"], answer: 1 },
  { q: "Biochar helps DDT soil by:", options: ["Oxidation", "Binding & preventing uptake", "Dilution", "Fertilization"], answer: 1 },
  { q: "Chhattisgarh Green GDP links:", options: ["Forest services with GDP", "Industry with carbon credits", "Tourism with forests", "Subsidies with climate"], answer: 0 },
  { q: "Rhodamine B banned as it:", options: ["Causes allergy", "Induces DNA damage", "Reduces sugar", "Non-biodegradable"], answer: 1 },
  { q: "Wetland City Accreditation under Ramsar COP:", options: ["10", "11", "12", "13"], answer: 2 },
  { q: "Organophosphates formed from:", options: ["Sulphuric acid + alcohol", "Phosphoric acid + alcohol", "Nitric acid + ester", "Amine + acid chloride"], answer: 1 },
  { q: "Nitrogen pollution arises from:", options: ["Ozone", "Fertilizers & livestock", "Solar radiation", "Deforestation"], answer: 1 },
  { q: "Methemoglobinemia caused by:", options: ["Lead", "Fluoride", "Nitrate", "Arsenic"], answer: 2 },
  { q: "Trichophyton indotineae is:", options: ["Plant fungus", "Skin fungus", "Virus", "Bacterium"], answer: 1 },
  { q: "Esterase enzyme degrades:", options: ["Metals", "DEHP plasticizer", "DDT", "PE only"], answer: 1 },
  { q: "Eddington limit is balance between:", options: ["Thermal & chemical", "Gravity & radiation", "Fusion & fission", "Electric & magnetic"], answer: 1 },
  { q: "Nano-urea applied as:", options: ["Soil", "Seeds", "Leaf spray", "Irrigation"], answer: 2 },
  { q: "Guillain Barre affects:", options: ["Respiratory", "Peripheral nervous", "Digestive", "Renal"], answer: 1 },
  { q: "CROPS experiment relates to:", options: ["Crop insurance", "Growing plants in microgravity", "Genetic editing", "Radiation test"], answer: 1 },
  { q: "GPU efficient due to:", options: ["Quantum bits", "Parallel processing", "Serial ops", "Image only"], answer: 1 },
  { q: "Silicon Carbide properties:", options: ["Soft", "Hard & semiconducting", "Corrosive", "Magnetic"], answer: 1 },
  { q: "SpaDeX made India the ___ country to dock spacecraft:", options: ["3rd", "4th", "5th", "6th"], answer: 1 }
];

// Shuffle questions
questions.sort(() => Math.random() - 0.5);

// Render quiz
const quizDiv = document.getElementById('quiz');
questions.forEach((q, i) => {
  const div = document.createElement('div');
  div.classList.add('question');
  div.innerHTML = `<h3>Q${i+1}. ${q.q}</h3>` + q.options.map((opt, idx) => `<label><input type='radio' name='q${i}' value='${idx}'> ${opt}</label><br>`).join('');
  quizDiv.appendChild(div);
});

function submitQuiz(){
  clearInterval(timerInterval);
  let score = 0, correct=0, wrong=0, unattempted=0;
  let answers=[];
  questions.forEach((q, i) => {
    const selected = document.querySelector(`input[name='q${i}']:checked`);
    if(!selected){ unattempted++; return; }
    const val = parseInt(selected.value);
    if(val === q.answer){ score += 2; correct++; }
    else { score -= 0.66; wrong++; }
    answers.push(q.options[q.answer]);
  });
  const total = questions.length;
  let msg = `Quiz Completed!\nTotal: ${total}\nCorrect: ${correct}\nWrong: ${wrong}\nUnattempted: ${unattempted}\nFinal Score: ${score.toFixed(2)}`;
  alert(msg);
  document.getElementById('result').innerHTML = '<p>Sending your results via email...</p>';

  // Send data to Google Script
  fetch(SCRIPT_URL, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      name: candidateName,
      email: candidateEmail,
      score: score.toFixed(2),
      correct: correct,
      wrong: wrong,
      unattempted: unattempted,
      answers: answers
    })
  })
  .then(res => res.text())
  .then(txt => {
    document.getElementById('result').innerHTML = `<p>Results sent successfully to <b>${candidateEmail}</b>.</p>`;
  })
  .catch(err => {
    document.getElementById('result').innerHTML = `<p>Error sending results: ${err}</p>`;
  });
}
</script>
</body>
</html>
